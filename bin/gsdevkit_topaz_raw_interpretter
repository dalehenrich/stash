#!/usr/bin/env bash
#
#	command line interpretter for topaz script
#	
#

topazFile=`realpath $1`
shift

debug="false"
if [ "$1" = "-D" ] ; then
	# hack .. for now
	debug="true"
	shift
fi

topazArgs="$*"
if [ $# -eq 0 ] ; then
	topazArgs="$GEMSTONE_SCRIPT_ARGS"
fi


if [ "$debug" = "true" ] ; then
	echo "INPUT $topazFile"
	$GS_HOME/bin/startTopaz $topazArgs
else
	$GS_HOME/bin/scriptTopaz $topazArgs << EOF
	input $topazFile
EOF
	status="$?"
	if [ "$status" != 0 ] ; then
		exit $status
	fi
fi
